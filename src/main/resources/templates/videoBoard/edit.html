<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Insert title here</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script th:inline="javascript">
        $(document).ready(function () {
            $("#del").click(function () {
                location.href = "/videoBoard/del?videoBoardId=[[${vdto.videoBoardId}]]";
            });
        });
    </script>
</head>
<body>
<div>
    <form method="post" action="/videoBoard/edit">
        <table>
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <input type="hidden" name="videoBoardId" th:value="${vdto.videoBoardId}">
            <label for="title">Title:</label>
            <input type="text" id="title" th:field="${vdto.title}" th:disabled="!${#authorization.expression('hasRole(''ROLE_ADMIN'')')}">
            <br>
            <label for="description">Description:</label>
            <textarea id="description" th:field="${vdto.description}" th:disabled="!${#authorization.expression('hasRole(''ROLE_ADMIN'')')}"></textarea>
            <br>
            <iframe th:src="'https://www.youtube.com/embed/' + ${vdto.youtubeId}" width="560" height="315"
                    frameborder="0" allowfullscreen></iframe>
            <br>
            <div sec:authorize="hasRole('ROLE_ADMIN')">
                <label for="youtubeUrl">YouTube Video URL: </label>
                <input type="text" id="youtubeUrl" name="youtubeUrl" th:field="${vdto.youtubeUrl}">
                <input type="submit" value="수정"><input type="button" id="del" value="삭제">
            </div>
        </table>
    </form>
</div>
</body>
</html>
